<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>VOID RUNNER</title>
<style>
*{margin:0;padding:0}
body{background:#000;overflow:hidden;touch-action:none;-webkit-user-select:none;user-select:none}
canvas{display:block}
#ui{position:fixed;top:0;left:0;right:0;pointer-events:none;padding:16px 20px;display:flex;justify-content:space-between;align-items:flex-start;font-family:-apple-system,system-ui,sans-serif;z-index:2}
#score{font-size:1.8em;font-weight:800;color:#66d9ff;text-shadow:0 0 20px #66d9ff66}
#hi{font-size:.75em;color:#9966ff88}
#lives{font-size:1.2em}
#menu{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:3;background:#000000ee}
#menu h1{font-size:2.4em;font-weight:900;font-family:-apple-system,system-ui,sans-serif;background:linear-gradient(135deg,#66d9ff,#9966ff,#ff66d9);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:4px}
#menu .sub{color:#888;font-size:.85em;font-family:-apple-system,system-ui,sans-serif;margin-bottom:32px}
#menu .go{padding:16px 48px;background:linear-gradient(135deg,#66d9ff,#9966ff);color:#000;font-weight:800;font-size:1.1em;border:none;border-radius:30px;cursor:pointer;font-family:-apple-system,system-ui,sans-serif;pointer-events:auto}
#menu .tag{position:absolute;bottom:24px;color:#333;font-size:.7em;font-family:-apple-system,system-ui,sans-serif}
#over{display:none;position:fixed;inset:0;flex-direction:column;align-items:center;justify-content:center;z-index:3;background:#000000dd}
#over h2{font-size:2em;font-weight:800;color:#ff3366;font-family:-apple-system,system-ui,sans-serif;margin-bottom:8px}
#over .fs{font-size:3em;font-weight:900;background:linear-gradient(135deg,#66d9ff,#9966ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin:12px 0}
#over .hs{color:#9966ff;font-size:.9em;margin-bottom:24px;font-family:-apple-system,system-ui,sans-serif}
#over .go{padding:14px 40px;background:linear-gradient(135deg,#66d9ff,#9966ff);color:#000;font-weight:800;font-size:1em;border:none;border-radius:30px;cursor:pointer;font-family:-apple-system,system-ui,sans-serif;pointer-events:auto}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="ui"><div><div id="score">0</div><div id="hi"></div></div><div id="lives"></div></div>
<div id="menu"><h1>VOID RUNNER</h1><div class="sub">Dodge the void. Collect the light.</div><button class="go" onclick="start()">TAP TO PLAY</button><div class="tag">ðŸ”® Delivered via Glyph Â· No internet</div></div>
<div id="over"><h2>VOID CONSUMED</h2><div class="fs" id="fs">0</div><div class="hs" id="hs"></div><button class="go" onclick="start()">PLAY AGAIN</button></div>
<script>
const c=document.getElementById('c'),x=c.getContext('2d');
let W,H,dpr,player,obs,parts,orbs,score,lives,hi=0,frame,running,speed,trail,shake,combo,lastOrb;

function resize(){dpr=Math.min(window.devicePixelRatio||1,2);W=innerWidth;H=innerHeight;c.width=W*dpr;c.height=H*dpr;c.style.width=W+'px';c.style.height=H+'px';x.setTransform(dpr,0,0,dpr,0,0);}
resize();addEventListener('resize',resize);

function start(){
  document.getElementById('menu').style.display='none';
  document.getElementById('over').style.display='none';
  resize();
  x.fillStyle='#000';x.fillRect(0,0,W,H);
  player={x:W/2,y:H*0.75,r:10,tx:W/2};
  obs=[];parts=[];orbs=[];trail=[];
  score=0;lives=3;frame=0;speed=2;combo=1;lastOrb=0;shake=0;running=true;
  updateUI();loop();
}

function updateUI(){
  document.getElementById('score').textContent=score;
  document.getElementById('lives').textContent='â—'.repeat(lives)+'â—‹'.repeat(3-lives);
  document.getElementById('hi').textContent=hi>0?'HI '+hi:'';
}

function gameOver(){
  running=false;
  if(score>hi)hi=score;
  document.getElementById('fs').textContent=score;
  document.getElementById('hs').textContent=score>=hi&&hi>0?'â˜… NEW HIGH SCORE â˜…':'Best: '+hi;
  document.getElementById('over').style.display='flex';
}

function spawnObs(){
  let w=30+Math.random()*60;
  let gap=90+Math.random()*40;
  let side=Math.random()<0.5;
  obs.push({x:side?-w:W+w,y:-20,w:w,h:14+Math.random()*10,
    vx:side?(1+Math.random()*2):-(1+Math.random()*2),vy:speed+Math.random()*2,
    color:Math.random()<0.3?'#ff3366':Math.random()<0.5?'#9966ff':'#334'});
}

function spawnOrb(){
  orbs.push({x:40+Math.random()*(W-80),y:-20,r:6,vy:speed*0.8+1,pulse:0,
    color:Math.random()<0.3?'#ff66d9':'#66d9ff'});
}

function boom(px,py,col,n){
  for(let i=0;i<n;i++){
    let a=Math.random()*Math.PI*2,s=1+Math.random()*4;
    parts.push({x:px,y:py,vx:Math.cos(a)*s,vy:Math.sin(a)*s,
      r:1+Math.random()*2,life:1,decay:.02+Math.random()*.03,color:col});
  }
}

function loop(){
  if(!running)return;
  requestAnimationFrame(loop);
  frame++;

  // Difficulty ramp
  speed=2+frame*0.002;
  if(frame%Math.max(10,40-Math.floor(frame/200))===0)spawnObs();
  if(frame%70===0)spawnOrb();

  // Player movement (smooth lerp to touch/mouse target)
  player.x+=(player.tx-player.x)*0.12;
  // Keep in bounds
  player.x=Math.max(player.r,Math.min(W-player.r,player.x));

  // Trail
  trail.push({x:player.x,y:player.y,life:1});
  if(trail.length>20)trail.shift();

  // Update obstacles
  for(let i=obs.length-1;i>=0;i--){
    let o=obs[i];o.x+=o.vx;o.y+=o.vy;
    if(o.y>H+50){obs.splice(i,1);continue;}
    // Collision
    if(player.y>o.y-o.h/2-player.r&&player.y<o.y+o.h/2+player.r&&
       player.x>o.x-o.w/2-player.r&&player.x<o.x+o.w/2+player.r){
      boom(player.x,player.y,'#ff3366',20);
      shake=8;combo=1;lives--;updateUI();
      obs.splice(i,1);
      if(lives<=0){gameOver();return;}
      continue;
    }
  }

  // Update orbs
  for(let i=orbs.length-1;i>=0;i--){
    let o=orbs[i];o.y+=o.vy;o.pulse+=0.1;
    if(o.y>H+30){orbs.splice(i,1);combo=1;continue;}
    let dx=player.x-o.x,dy=player.y-o.y,dist=Math.sqrt(dx*dx+dy*dy);
    if(dist<player.r+o.r+4){
      let pts=10*combo;score+=pts;combo=Math.min(combo+1,8);lastOrb=frame;
      boom(o.x,o.y,o.color,12);
      orbs.splice(i,1);updateUI();
    }
  }

  // Update particles
  for(let i=parts.length-1;i>=0;i--){
    let p=parts[i];p.x+=p.vx;p.y+=p.vy;p.vy+=0.05;p.life-=p.decay;
    if(p.life<=0)parts.splice(i,1);
  }

  // Shake
  let sx=0,sy=0;
  if(shake>0){sx=(Math.random()-.5)*shake;sy=(Math.random()-.5)*shake;shake*=0.8;if(shake<0.5)shake=0;}

  // --- DRAW ---
  x.save();
  x.translate(sx,sy);

  // Background with speed lines
  x.fillStyle='rgba(0,0,0,0.15)';
  x.fillRect(0,0,W,H);

  // Starfield / speed lines
  for(let i=0;i<3;i++){
    let sx2=Math.random()*W,sy2=Math.random()*H;
    x.globalAlpha=0.3;x.strokeStyle='#224';x.lineWidth=0.5;
    x.beginPath();x.moveTo(sx2,sy2);x.lineTo(sx2,sy2+10+speed*3);x.stroke();
  }
  x.globalAlpha=1;

  // Obstacles
  obs.forEach(o=>{
    x.fillStyle=o.color;
    x.shadowColor=o.color;x.shadowBlur=o.color==='#334'?0:15;
    x.beginPath();
    x.rect(o.x-o.w/2,o.y-o.h/2,o.w,o.h);
    x.fill();
    x.shadowBlur=0;
  });

  // Orbs
  orbs.forEach(o=>{
    let s=1+Math.sin(o.pulse)*0.2;
    x.globalAlpha=0.15;x.fillStyle=o.color;
    x.beginPath();x.arc(o.x,o.y,o.r*3*s,0,Math.PI*2);x.fill();
    x.globalAlpha=0.4;
    x.beginPath();x.arc(o.x,o.y,o.r*1.8*s,0,Math.PI*2);x.fill();
    x.globalAlpha=1;
    x.fillStyle=o.color;x.shadowColor=o.color;x.shadowBlur=12;
    x.beginPath();x.arc(o.x,o.y,o.r*s,0,Math.PI*2);x.fill();
    x.shadowBlur=0;
  });

  // Player trail
  trail.forEach((t,i)=>{
    let a=i/trail.length;
    x.globalAlpha=a*0.3;
    x.fillStyle=combo>3?'#ff66d9':combo>1?'#9966ff':'#66d9ff';
    x.beginPath();x.arc(t.x,t.y,player.r*a*0.6,0,Math.PI*2);x.fill();
    t.life-=0.05;
  });
  x.globalAlpha=1;

  // Player
  let pc=combo>3?'#ff66d9':combo>1?'#9966ff':'#66d9ff';
  x.fillStyle=pc;x.shadowColor=pc;x.shadowBlur=20;
  x.beginPath();x.arc(player.x,player.y,player.r,0,Math.PI*2);x.fill();
  // Inner glow
  x.fillStyle='#fff';x.shadowBlur=0;
  x.beginPath();x.arc(player.x,player.y,player.r*0.4,0,Math.PI*2);x.fill();
  // Shield ring when recently collected
  if(frame-lastOrb<15){
    x.globalAlpha=(15-(frame-lastOrb))/15*0.5;
    x.strokeStyle=pc;x.lineWidth=2;
    x.beginPath();x.arc(player.x,player.y,player.r+8+(frame-lastOrb),0,Math.PI*2);x.stroke();
    x.globalAlpha=1;
  }

  // Particles
  parts.forEach(p=>{
    x.globalAlpha=p.life;x.fillStyle=p.color;
    x.beginPath();x.arc(p.x,p.y,p.r*p.life,0,Math.PI*2);x.fill();
  });
  x.globalAlpha=1;

  // Combo display
  if(combo>1){
    x.globalAlpha=0.7;x.fillStyle=pc;
    x.font='bold 14px -apple-system,system-ui,sans-serif';
    x.textAlign='center';
    x.fillText(combo+'x COMBO',player.x,player.y-24);
    x.globalAlpha=1;
  }

  x.restore();
}

// Input
let touching=false;
function mv(px){if(running&&player)player.tx=px;}
c.addEventListener('touchstart',e=>{e.preventDefault();touching=true;mv(e.touches[0].clientX);},{passive:false});
c.addEventListener('touchmove',e=>{e.preventDefault();if(touching)mv(e.touches[0].clientX);},{passive:false});
c.addEventListener('touchend',()=>{touching=false;});
c.addEventListener('mousemove',e=>{if(e.buttons)mv(e.clientX);});
c.addEventListener('mousedown',e=>{mv(e.clientX);});
// Tilt
if(window.DeviceOrientationEvent){
  addEventListener('deviceorientation',e=>{
    if(running&&player&&e.gamma!=null){
      player.tx=W/2+e.gamma*(W/90);
    }
  });
}
</script>
</body>
</html>
